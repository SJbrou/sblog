<section id="feed">
    <!-- Current Month's Posts -->
    <!-- previously: [Month]'s Thoughts: <h1>{{ "now" | date: "%B" }}'s Thoughts</h1> -->
    <h1>Thoughts</h1>
    <ul>
      {% assign sorted_posts = site.posts | sort: 'date' | reverse %} <!-- Sort posts chronologically, newest first -->
      {% assign current_month = "" %}
      
      {% for post in sorted_posts %}
        {% assign post_month = post.date | date: "%B" %}
        
        <!-- Add space between months if we move to a new month -->
        {% if post_month != current_month %}
          <div class="month-separator-space"></div> <!-- Empty space between months -->
          <div class="month-separator">
            <span>{{ post_month }}</span>
          </div>
          {% assign current_month = post_month %}
        {% endif %}
        
        <li>
          <div class="post-entry">
            <span class="post-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></span>
            <div class="post-separator"></div> <!-- Separator line between title and date -->
            <span class="post-date">
              {% assign day = post.date | date: "%d" %}
              {% assign day_int = day | plus: 0 %} <!-- Convert the day to integer for logic -->
              {% if day_int == 11 or day_int == 12 or day_int == 13 %}
                {{ day }}th
              {% else %}
                {% case day_int %}
                  {% when 1 %}{{ day }}st
                  {% when 2 %}{{ day }}nd
                  {% when 3 %}{{ day }}rd
                  {% else %}{{ day }}th
                {% endcase %}
              {% endif %}
            </span>
          </div>
        </li>
      {% endfor %}
    </ul>
  
    <!-- Posts by Month and Year -->
    {% assign current_year = "" %}
    {% assign current_month = "" %}
    {% for post in sorted_posts %}
      {% unless post.date | date: "%B" == "now" | date: "%B" and post.date | date: "%Y" == "now" | date: "%Y" %}
        {% capture post_month %}{{ post.date | date: "%B" }}{% endcapture %}
        {% capture post_year %}{{ post.date | date: "%Y" }}{% endcapture %}
  
        <!-- Year Separator -->
        {% if post_year != current_year %}
          <hr />
          <div class="year-separator">
            <span>{{ post_year }}</span>
          </div>
          {% assign current_year = post_year %}
        {% endif %}
  
        <!-- Add space between months if we move to a new month -->
        {% if post_month != current_month %}
          <div class="month-separator-space"></div> <!-- Empty space between months -->
          <div class="month-separator">
            <span>{{ post_month }}</span>
          </div>
          {% assign current_month = post_month %}
        {% endif %}
  
        <!-- Post Entry -->
        <div class="post-entry">
          <span class="post-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></span>
          <div class="post-separator"></div> <!-- Separator line -->
          <span class="post-date">
            {% assign day = post.date | date: "%d" %}
            {% assign day_int = day | plus: 0 %} <!-- Convert the day to integer for logic -->
            {% if day_int == 11 or day_int == 12 or day_int == 13 %}
              {{ day }}th
            {% else %}
              {% case day_int %}
                {% when 1 %}{{ day }}st
                {% when 2 %}{{ day }}nd
                {% when 3 %}{{ day }}rd
                {% else %}{{ day }}th
              {% endcase %}
            {% endif %}
          </span>
        </div>
      {% endunless %}
    {% endfor %}
  </section>
  